<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title> User | Welcome</title>
    <!--link href="/templates/.css" rel="stylesheet" type="text/css" /-->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
            integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
            integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
            crossorigin="anonymous"></script>

    <script src="https://kit.fontawesome.com/a81368914c.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="shortcut icon" type="image/x-icon" href="/static/logo.png" />
</head>

<style>
    *{
  box-sizing: border-box;
}

* {
  padding: 0;
  margin: 0;
}

body{
  background-color: #a8d0e6;
}


.header {
  font-family: sans-serif;
  color: #f76c6c;
  margin: 0px;
  font-size: x-large;
  background-color: #24305e;
  padding: 40px;
}

.project-title {
  display: inline;
  margin: 40px 0px;
  padding: 5px 10px;
  border: solid #ffffff;
  border-width: 5px 0px;
}

#logout {
  border-radius: 30px;
  width: 100px;
  height: 40px;
  outline: none;
  transition: transform 0.8s;
  float: right;
  margin-left: 10px;
}

#logout:hover {
  transform: scale(.9);
}

.search {
  display: flex;
  justify-content: center;
  font-family: sans-serif;
  margin: 20px;
  outline:none;
}

#searchbar {
  border-radius: 30px;
  width: 760px;
  height: 40px;
  border-color: #24305e;
  outline: none;
  padding-left: 20px;
  /* background-color: #24305e; */
}

#searchbutton {
  border-radius: 30px;
  color: white;
  font-size: 20px;
  padding: 5px;
  /* width: 50px; */
  /* height: 40px; */
  border-color: #24305e;
  background-color: #24305e;
  outline:none;
  transition: transform 0.8s;
}

#searchbutton:hover {
  transform: scale(.9);
}

.home-row {
  display: flex;
  flex-direction: row;
  /* align-items: center; */
  margin: 20px;
  /* justify-content: space-evenly; */
}

.graph{
  width: 51%;
  padding: 10px;
}

.live-sales, .live-orders{
  width: 50%;
  height: 100%;
  padding: 7px;
}

iframe {
  border: solid black 2px;
}


#Salesreport {
  color: white;
  border-radius: 30px;
  width: 100px;
  height: 40px;
  border-color: #24305e;
  background-color: #24305e;
  outline:none;
  transition: transform 0.8s;
}
#Transactions {
  color: white;
  border-radius: 30px;
  width: 100px;
  height: 40px;
  border-color: #24305e;
  background-color: #24305e;
  outline:none;
  transition: transform 0.8s;
}


.sales {
  margin-top: 1%;
  font-family: sans-serif;
  display: flex;
  flex-direction: row;
  margin-left: 2%;
}
.data-table{
  /* border-collapse; */
  border-spacing: 1 1em;
  border: 2px solid rgb(0, 0, 0);
  background-color: white;
  width: 28%;
  text-align: left;
  word-spacing: 10px;
  box-sizing: border-box;
  border-radius: 6px;
  margin: .4%;
}
.table-row:nth-child(even) {
  background-color: rgb(173, 173, 173);
}

.table-row:nth-child(odd) {
  background-color: rgb(226, 226, 226);
}

.table-heading {
  font-size: large;
}

.table1-cell {
  background-color: rgb(255, 255, 255);
  padding: 50pxpx;
}

.table-title {
  font-family: sans-serif;
  background-color: #24305e;
  font-size: larger;
  color: white;
}

.tablerow1 {
  display: flex;
  flex-direction: row;
}

.table2{
  border-collapse: separate;
  border-spacing: 1 1em;
  border: 2px solid rgb(0, 0, 0);
  margin: 2%;
  background-color: white;
  width: 50%;
  text-align: left;
  word-spacing: 10px;
  box-sizing: border-box;
  border-radius: 6px;
}

#backtotop
{
  align-items: center;
  font-family: sans-serif;
  font-size: large;
  color: white;
  text-align: center;
  border-radius: 5px;
  background-color: #24305e;
  width: 140px;
  height: 30px;

}

.backto {
  margin-left: 45.5%;
}

.box {
  display: flex;
  flex-direction: column;
  width: 100px;
  height: 100px;
  color: black;
}

.box1 {
  display: flex;
  flex-direction: column;
  width: 100px;
  height: 400px;
  color: black;
  margin-left: 0%;
}

.boxList {
  width: 300px;
  height: 400px;
  border: 2px solid rgb(0, 0, 0);
  margin: 1%;  
  
}

.box_head{
  font-family: sans-serif;
  color: #ffffff;
  background-color: #24305e;
  margin-top: 0 0 0 auto;
  font-size: 20px;
  text-align: center;
  height: 40px;
}

.box_head1{
  font-family: sans-serif;
  color: #ffffff;
  background-color: #24305e;
  margin-top: 0 0 0 auto;
  /* font-size: 10px; */
  text-align: center;
}

.atOrders {
  width: 450px;
  height: 400px;
  margin-left: 14.5%;
  border: 2px solid rgb(0, 0, 0);
  font-size: 30px;
  text-align: center;
}

.vOrders {
  width: 375px;
  height: 355px;
  overflow-y: auto;
  font-size: small;
  margin-left: 29px;
}

.salesNumber {
  font-size: 50px;
  font-family:monospace;
  
}

.autoText {
font-family: sans-serif;
font-size: 15px;
}

.buttons {
  outline: none;
  width: 80px;
border-radius: 20px;
background-color: #24305e;
color: white;
transition: transform 0.8s;
}

.buttons:hover {
  transform: scale(.9);
}

.headingAutoOrder {
font-family: sans-serif;
font-size: 17px;

}
</style>

<body>
<div class="bgimage">

    <div class="navabar header" id="dest">
        <h2 class="project-title">AUTOMATIC ORDERING SYSTEM</h2>

        <a href="/logout">
            <button id="logout"> Logout</button>
        </a>

        <a href="salesOrdering.html">
            <button id="logout">Sales Portal</button>
        </a>
    </div>

    <div class="search">
        <form action="/home" method="POST">
            <input id="searchbar" type="text" placeholder="Search for item" name="Search" required>
            <button id="searchbutton" type="submit"><i class="fas fa-search"></i> Search</button>
        </form>
    </div>

    <div class="home-row">
        <div class="graph">
            <canvas id="salesChart"></canvas>
        </div>
        <!-- <div class="box">
          <div class="boxList">-->
        <!--<h3 id = "box_head">Total Items Sold From start </h3> -->
        <!--</div>-->
        <!--<div class="boxList">-->
        <!--<h3 id = "box_head">Total Items Sold From start </h3>-->
        <!--</div>-->
        <!-- <div class="boxList">-->
        <!-- <h3 id = "box_head">Total Items Sold From start </h3> -->
        <!-- </div> -->
        <!-- </div> -->

        <div class="box1" style="text-align: center;">
            <div class="boxList">
                <h3 class="box_head">Items Sold All Time :</h3>
                <h1 class="salesNumber" ><small>{{data["allTimeSales"]}}</small></h1>
            </div>
            <div class="boxList">
                <h3 class="box_head">Items Sold Per Month</h3>
                <h1 class="salesNumber"><small>{{data["soldPerMonth"]}}</small></h1>
            </div>
            <div class="boxList">
                <h3 class="box_head">Items Sold Per Week</h3>
                <h1 class="salesNumber"><small>{{data["soldPerWeek"]}}</small></h1>
            </div>
        </div>

        <!-- <div class="box1"> -->

        <div class="atOrders">
            <h3 class="box_head1">Auto Orders</h3>
            <div class="vOrders">
              <table>
              <tr>
              {% for i in headings4 %}
              <th class="headingAutoOrder">{{i}}</th>
              {% endfor %}
            </tr>
              {% for i in data["placedOrders"].keys() %}
                  <tr>  
                  <td><div class="autoText">{{i}}</div></td>
                  <td><div class="autoText">{{data["placedOrders"][i]['name']}}</div></td>
                  <td><div class="autoText" >{{data["placedOrders"][i]['quantity']}}</div></td>
                  #TODO Vamshi add link to delivery
                  <td> <button class="buttons">Delivered</button></td>
                </tr>
              {%endfor%}
            </table>
            </div>
        </div>

    </div>


    <div class="home-row">
        <div class="live-sales">
            <iframe class="frames" height=320px width=100% src="/orderConfirm" frameborder="0">

            </iframe>
        </div>

        <div class="live-orders">
            <iframe class="frames" height=320px width=100% src="/liveOrders" frameborder="0"></iframe>
        </div>
    </div>

    <div class="home-row">
        <table class="data-table">
            <tr class="table-title">
                <th colspan="3">High on Demand</th>
            </tr>
            <tr class="table-heading">
                {% for k in headings %}
                <th class="table-cell">{{ k }}</th>
                {% endfor %}
            </tr>

            {% for i in range(0, data["highOnDemand"]["limit"]) %}
            <tr class="table-row">
                {%if data["highOnDemand"]['items'][i] <10 %}
                <td class="table-cell"> ITEM_0{{data["highOnDemand"]['items'][i]}}</td>
                {%else%}
                <td class="table-cell"> ITEM_{{data["highOnDemand"]['items'][i]}}</td>
                {%endif%}
                <td class="table-cell"> {{ data["highOnDemand"]['quantity'][i]}}</td>
            </tr>
            {% endfor %}
        </table>

        <table class="data-table">
            <tr class="table-title">
                <th colspan="3">Low on Demand</th>
            </tr>
            <tr class="table-heading">
                {% for k in headings %}
                <th class="table-cell">{{ k }}</th>
                {% endfor %}
            </tr>
            {% for i in range(0, data["lowOnDemand"]["limit"]) %}
            <tr class="table-row">
                {%if data["lowOnDemand"]['items'][i] <10 %}
                <td class="table-cell"> ITEM_0{{data["lowOnDemand"]['items'][i]}}</td>
                {%else%}
                <td class="table-cell"> ITEM_{{data["lowOnDemand"]['items'][i]}}</td>
                {% endif %}
                <td class="table-cell"> {{ data["lowOnDemand"]['quantity'][i]}}</td>
            </tr>
            {% endfor %}
        </table>

        <table class="data-table">
            <tr class="table-title">
                <th colspan="3">Highest Earning</th>

            </tr>
            <tr class="table-heading">
                {% for l in headings2 %}
                <th class="table-cell">{{ l }}</th>
                {% endfor %}
            </tr>
            {% for i in range(0, data["highestEarning"][2]) %}
            <tr class="table-row">
                {%if data["highestEarning"][0][i] < 10 %}
                <td class="table-cell"> ITEM_0{{data["highestEarning"][0][i]}}</td>
                {%else%}
                <td class="table-cell"> ITEM_{{data["highestEarning"][0][i]}}</td>
                {%endif%}
                <td class="table-cell"> {{data["highestEarning"][1][i]}}</td>
            </tr>
            {% endfor %}
        </table>

        <table class="data-table">
            <tr class="table-title">
                <th colspan="3">Lowest Earning</th>
            </tr>
            <tr class="table-heading">
                {% for l in headings2 %}
                <th class="table-cell">{{ l }}</th>
                {% endfor %}
            </tr>
            {% for i in range(0, data["lowestEarning"][2]) %}
            <tr class="table-row">
                {%if data["lowestEarning"][0][i] < 10 %}
                <td class="table-cell"> ITEM_0{{data["lowestEarning"][0][i]}}</td>
                {%else%}
                <td class="table-cell"> ITEM_{{data["lowestEarning"][0][i]}}</td>
                {%endif%}
                <td class="table-cell"> {{data["lowestEarning"][1][i]}}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    '{{ data["predictedSales"]["xaxis"] }}'
    '{{ data["predictedSales"]["yaxis"] }}'
</body>
{{data["predictedSales"]["xaxis"]}}
<script>
    var ctx = document.getElementById('salesChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: '{{data["predictedSales"]["xaxis"]}}',
            datasets: [{
                label: 'No. of items sold',
                fill: true,
                lineTension: 0,
                data: '{{ data["predictedSales"]["yaxis"] }}', 
                
                borderColor: "rgba(0, 0, 0, 1)",
                // hoverBorderColor: "rgba(0, 255, 0, 1)",
                borderWidth: 1,
    
                pointBackgroudColor: "rgba(255, 0, 0, 1)"
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            }
        }
    });


</script>
</html>
